# Что такое буферы в Neovim?

## Простое объяснение

**Буфер** - это открытый файл в памяти Neovim. Каждый раз, когда вы открываете файл, создается новый буфер.

## Аналогия с браузером

Представьте браузер:
- **Вкладки в браузере** = **Табы в Neovim** (barbar.nvim)
- **Открытые веб-страницы** = **Буферы в Neovim**

В браузере вы можете:
- Открыть 10 вкладок, но видеть только 3-4 одновременно
- Переключаться между всеми открытыми страницами

В Neovim то же самое:
- Открыть 10 файлов (буферов), но видеть только несколько табов
- Переключаться между всеми открытыми файлами

## Примеры буферов

### Ситуация: у вас открыто 5 файлов
```
Открытые буферы:
1. init.lua          (активный - вы его видите)
2. README.md         (открыт, но скрыт)
3. package.json      (открыт, но скрыт)
4. main.js           (открыт, но скрыт)
5. style.css         (открыт, но скрыт)
```

### Что вы видите в табах (barbar.nvim):
```
[1 init.lua] [2 README.md] [3 package.json] ...
     ↑           ↑              ↑
  активный    буфер 2        буфер 3
```

## Типы буферов

### 1. **Активный буфер** (current buffer)
- Файл, который вы сейчас редактируете
- Курсор находится в нем
- Один на каждое окно/split

### 2. **Открытые буферы** (open buffers)
- Все файлы, загруженные в память
- Могут быть невидимыми, но быстро доступными
- Сохраняют историю undo/redo

### 3. **Скрытые буферы** (hidden buffers)
- Открытые файлы, которые не отображаются в табах
- Доступны через команды поиска

## Команды для работы с буферами

### Просмотр буферов
```vim
:ls                    " Список всех буферов
:buffers              " То же самое
;;                    " Telescope: поиск по открытым буферам
```

### Переключение между буферами
```vim
:b1                   " Перейти к буферу номер 1
:b init               " Перейти к буферу с именем содержащим "init"
:bnext               " Следующий буфер
:bprev               " Предыдущий буфер
```

### Ваши горячие клавиши (barbar.nvim)
```
Ctrl-,               " Предыдущий буфер
Ctrl-.               " Следующий буфер
Alt-1 до Alt-9       " Прямой переход к буферу по номеру
Ctrl-c               " Закрыть текущий буфер
Ctrl-b               " Закрыть все буферы кроме текущего
```

## Практические примеры

### Пример 1: Работа над проектом
```
Открываете:
1. index.html
2. style.css  
3. script.js
4. README.md

Все стали буферами. Переключаетесь между ними с Ctrl-,/Ctrl-.
```

### Пример 2: Поиск по буферам
```
;; (двойная точка с запятой)
↓
Откроется Telescope с списком ВСЕХ открытых буферов
Можете искать по имени и быстро переключиться
```

### Пример 3: "Потерянный" файл
```
Ситуация: открыли 10 файлов, табы показывают только 3
Решение: ;; → найти нужный буфер по имени
```

## Состояния буферов

### В выводе `:ls` вы увидите:
- `%a` - активный буфер (current)
- `#` - альтернативный буфер (последний использованный)
- `+` - буфер с несохраненными изменениями
- `-` - буфер только для чтения
- `h` - скрытый буфер

### Пример вывода `:ls`:
```
1 %a   "init.lua"     строка 45
2      "README.md"    строка 12  
3  +   "style.css"    строка 8    (+ означает несохраненные изменения)
4  h   "config.js"    строка 1    (h означает скрытый)
```

## Отличие: буферы vs окна vs табы

### **Буферы** (files in memory)
- Открытые файлы в памяти
- Могут быть невидимыми
- Быстрое переключение

### **Окна** (splits)
- Визуальные области на экране
- `:split`, `:vsplit`
- Один буфер может отображаться в нескольких окнах

### **Табы** (tab pages)
- Коллекции окон
- У вас настроен barbar.nvim - это НЕ табы Neovim, а отображение буферов

## Зачем это нужно?

### 1. **Скорость**
- Буферы остаются в памяти
- Мгновенное переключение без загрузки файла

### 2. **Контекст**
- История изменений сохраняется
- Позиция курсора запоминается
- Undo/redo история

### 3. **Удобство**
- Можете работать с множеством файлов
- Быстрый поиск среди открытых файлов
- Не нужно постоянно открывать/закрывать файлы

## Практические советы

### 1. Используйте поиск по буферам
```
;;                    " Telescope поиск по открытым буферам
```

### 2. Закрывайте ненужные буферы
```
Ctrl-c               " Закрыть текущий
Ctrl-b               " Закрыть все кроме текущего
:bd                  " Закрыть буфер (buffer delete)
```

### 3. Проверяйте список буферов
```
:ls                  " Посмотреть все открытые буферы
```

### 4. Альтернативный буфер
```
Ctrl-^               " Переключиться к последнему буферу
```

## Заключение

**Буферы** - это основа работы с файлами в Neovim. Понимание буферов поможет:
- Эффективно работать с множеством файлов
- Быстро переключаться между задачами
- Не терять контекст при работе

Главное правило: **файл открыт = буфер создан = доступен для быстрого переключения**